<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>For My Muddu ‚ù§Ô∏è</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Quicksand:wght@400;600;700&display=swap');

        body {
            margin: 0; padding: 0;
            background: #fff0f3;
            font-family: 'Quicksand', sans-serif;
            display: flex; justify-content: center; align-items: center;
            min-height: 100vh; overflow: hidden;
            touch-action: manipulation;
        }

        .bg-hearts { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; pointer-events: none; }

        .container {
            width: 90%; max-width: 420px;
            background: white; border: 6px solid #ffccd5;
            border-radius: 40px; padding: 25px;
            text-align: center; box-shadow: 0 15px 40px rgba(255, 182, 193, 0.4);
            position: relative; z-index: 10;
        }

        .gif-box img { width: 100%; max-width: 200px; border-radius: 20px; margin-bottom: 15px; }
        h1 { font-family: 'Dancing Script', cursive; color: #ff4d6d; font-size: 2.2rem; margin: 10px 0; }
        p { color: #555; font-size: 1.1rem; line-height: 1.5; font-weight: 600; }

        /* No-Button Container */
        .btn-box {
            display: flex; justify-content: center; gap: 20px;
            margin-top: 25px; height: 120px; position: relative;
            background: rgba(255, 204, 213, 0.1); border-radius: 20px;
        }

        .btn {
            padding: 15px 30px; border: none; border-radius: 50px;
            font-size: 1.2rem; font-weight: 700; cursor: pointer;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }

        #yesBtn { background: #ff4d6d; color: white; transition: 0.3s; z-index: 50; }
        #noBtn { background: #ffb3c1; color: white; position: absolute; z-index: 40; transition: 0.1s ease; }

        /* Game Elements */
        #game-canvas {
            background: #fff9fa; border: 3px dashed #ffccd5;
            border-radius: 25px; cursor: pointer; margin: 15px 0;
            width: 100%; height: 240px; touch-action: none;
        }

        .letter-text {
            background: #fff9fa; border-left: 6px solid #ff4d6d;
            padding: 20px; text-align: left; border-radius: 15px;
            font-size: 1rem; line-height: 1.8; color: #444;
            max-height: 350px; overflow-y: auto;
        }

        .quiz-option {
            display: block; width: 100%; padding: 15px; margin: 12px 0;
            background: #fff0f3; border: 2px solid #ffccd5;
            border-radius: 18px; cursor: pointer; font-weight: 700;
            color: #ff4d6d; transition: 0.2s;
        }
        .quiz-option:hover { background: #ffccd5; color: white; }

        .hidden { display: none; }
        
        @keyframes floatUp { to { transform: translateY(-110vh); opacity: 0; } }
    </style>
</head>
<body>
    <div class="bg-hearts" id="heartPool"></div>

    <div id="page1" class="container">
        <div class="gif-box"><img src="https://media.tenor.com/On7_59y0_N8AAAAi/milk-and-mocha.gif" alt="Cute Bears"></div>
        <h1>Hi Muddu... ‚ù§Ô∏è</h1>
        <p>I have a secret question... Do you love me?</p>
        <div class="btn-box" id="btnContainer">
            <button class="btn" id="yesBtn" onclick="nextPage(2)">YES!</button>
            <button class="btn" id="noBtn" onmouseover="moveNo()" ontouchstart="moveNo()">No</button>
        </div>
    </div>

    <div id="page2" class="container hidden">
        <h1>Catch My Love! üå∏</h1>
        <p>Catch 5 hearts to reveal the next surprise:</p>
        <canvas id="game-canvas"></canvas>
        <p id="score" style="color: #ff4d6d; font-size: 1.5rem; font-weight: bold;">Score: 0 / 5</p>
    </div>

    <div id="page3" class="container hidden">
        <div class="gif-box"><img src="https://media.tenor.com/0uB0CId6r-gAAAAi/dance.gif" alt="Happy Dance"></div>
        <h1>Hehe, Almost There!</h1>
        <p>How much of my heart do you own?</p>
        <button class="quiz-option" onclick="nextPage(4)">99% (Wait, what?!)</button>
        <button class="quiz-option" onclick="nextPage(4)">100% (The correct answer ‚ù§Ô∏è)</button>
        <button class="quiz-option" onclick="nextPage(4)">More than Infinity! ‚ú®</button>
    </div>

    <div id="page4" class="container hidden" style="max-width: 460px;">
        <div class="gif-box"><img src="https://media.tenor.com/y1vO9l_7p_8AAAAi/love-hug.gif" alt="Love Hug"></div>
        <h1>My Dearest Muddu ‚ù§Ô∏è</h1>
        <div class="letter-text">
            I know you sometimes feel like you don't deserve this much effort, or you wonder why I do all this. But honestly, Muddu, it's the easiest thing in the world to love you. <br><br>
            Being away right now is hard, but you are the constant thought that makes every distance feel shorter. You don't have to "react" or say anything perfect‚Äîjust being who you are is the greatest gift I have. <br><br>
            You are my peace, my favorite smile, and my home. Never doubt how much you mean to me. I‚Äôm counting every second until I can see you again.
        </div>
        <p style="margin-top:20px; color: #ff4d6d; font-weight:800; font-size: 1.3rem;">I love you forever. ‚ù§Ô∏è</p>
        <button class="btn" id="yesBtn" onclick="location.reload()">Start Over?</button>
    </div>

    <script>
        // NAVIGATION
        function nextPage(num) {
            document.querySelectorAll('.container').forEach(c => c.classList.add('hidden'));
            document.getElementById('page' + num).classList.remove('hidden');
            if(num === 2) startHeartGame();
        }

        // UNBEATABLE NO BUTTON
        function moveNo() {
            const btn = document.getElementById('noBtn');
            const container = document.getElementById('btnContainer');
            
            // Strict boundaries within the container
            const padding = 10;
            const maxWidth = container.clientWidth - btn.clientWidth - padding;
            const maxHeight = container.clientHeight - btn.clientHeight - padding;
            
            const randomX = Math.max(padding, Math.floor(Math.random() * maxWidth));
            const randomY = Math.max(padding, Math.floor(Math.random() * maxHeight));
            
            btn.style.left = randomX + 'px';
            btn.style.top = randomY + 'px';
        }

        // WORKING HEART GAME
        function startHeartGame() {
            const canvas = document.getElementById('game-canvas');
            const ctx = canvas.getContext('2d');
            canvas.width = canvas.offsetWidth;
            canvas.height = canvas.offsetHeight;
            
            let score = 0;
            let heart = { x: canvas.width/2, y: canvas.height/2 };

            function draw() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                ctx.font = "50px Arial";
                ctx.textAlign = "center";
                ctx.textBaseline = "middle";
                ctx.fillText("‚ù§Ô∏è", heart.x, heart.y);
            }

            function moveHeart() {
                heart.x = Math.random() * (canvas.width - 100) + 50;
                heart.y = Math.random() * (canvas.height - 100) + 50;
                draw();
            }

            const checkCatch = (x, y) => {
                const dist = Math.sqrt((x - heart.x)**2 + (y - heart.y)**2);
                if (dist < 50) {
                    score++;
                    document.getElementById('score').innerText = `Score: ${score} / 5`;
                    if (score >= 5) nextPage(3);
                    else moveHeart();
                }
            };

            canvas.addEventListener('click', (e) => {
                const rect = canvas.getBoundingClientRect();
                checkCatch(e.clientX - rect.left, e.clientY - rect.top);
            });

            canvas.addEventListener('touchstart', (e) => {
                e.preventDefault();
                const rect = canvas.getBoundingClientRect();
                checkCatch(e.touches[0].clientX - rect.left, e.touches[0].clientY - rect.top);
            }, { passive: false });

            moveHeart();
        }

        // BACKGROUND ANIMATION
        setInterval(() => {
            const h = document.createElement('div');
            h.innerHTML = '‚ù§Ô∏è'; h.style.position = 'fixed'; h.style.left = Math.random()*100+'vw';
            h.style.top = '100vh'; h.style.color = '#ff4d6d'; h.style.opacity = Math.random();
            h.style.fontSize = (Math.random() * 20 + 10) + 'px';
            h.style.animation = `floatUp ${Math.random()*3+3}s linear forwards`;
            document.getElementById('heartPool').appendChild(h);
            setTimeout(()=>h.remove(), 5000);
        }, 350);
    </script>
</body>
</html>
